# План реализации переноса интерфейса доски объявлений из Bountiful

## Задачи

- [ ] 1. Подготовка ресурсов и текстур
  - [x] 1.1 Скопировать текстуру интерфейса из Bountiful


    - Скопировать `new_new_board.png` в `src/main/resources/assets/origins/textures/gui/container/bounty_board.png`
    - Проверить корректность размеров и формата текстуры
    - _Требования: 8.1, 8.2, 8.3_



  - [x] 1.2 Создать вспомогательный класс для работы со спрайтами




    - Создать `SpriteHelper.java` для замены функциональности KSpriteGrid
    - Реализовать методы для отрисовки различных частей интерфейса
    - Добавить константы для координат спрайтов






    - _Требования: 6.2, 8.4_



- [ ] 2. Создание базовых компонентов интерфейса
  - [ ] 2.1 Адаптировать BountyBoardScreen
    - Переписать `BoardScreen.kt` в `BountyBoardScreen.java`
    - Заменить KambrikHandledScreen на стандартный HandledScreen
    - Реализовать базовую структуру экрана с правильными размерами

    - _Требования: 1.1, 1.2, 6.1, 6.2_

  - [ ] 2.2 Обновить BountyBoardScreenHandler
    - Адаптировать существующий `BountyBoardScreenHandler.java`
    - Добавить поддержку синхронизации данных квестов

    - Интегрировать с системой квестов Origins
    - _Требования: 6.1, 6.3_

- [ ] 3. Реализация системы отображения квестов
  - [ ] 3.1 Создать QuestButton
    - Создать `QuestButton.java` на основе `BountyLongButton.kt`


    - Реализовать отрисовку иконок целей и наград
    - Добавить обработку кликов и выделения
    - _Требования: 2.2, 2.3, 4.1, 4.2_


  - [ ] 3.2 Реализовать список квестов с прокруткой
    - Добавить поддержку прокрутки списка квестов
    - Реализовать отображение максимум 7 квестов одновременно
    - Добавить полосу прокрутки при необходимости
    - _Требования: 2.1, 2.4_


- [ ] 4. Интеграция с системой квестов Origins
  - [ ] 4.1 Создать QuestIntegration
    - Создать класс для интеграции с существующей системой квестов
    - Реализовать методы получения доступных квестов по классу игрока
    - Добавить проверки возможности взятия квестов


    - _Требования: 6.4, 4.3_

  - [ ] 4.2 Реализовать взаимодействие с квестами
    - Добавить кнопки "Взять квест" и "Сдать квест"


    - Реализовать логику активации/деактивации кнопок
    - Добавить отправку пакетов на сервер для действий с квестами
    - _Требования: 4.1, 4.2, 4.4_


- [ ] 5. Реализация полосы прогресса и статистики
  - [ ] 5.1 Добавить полосу прогресса игрока
    - Реализовать отрисовку полосы прогресса в стиле Bountiful
    - Интегрировать с системой уровней Origins
    - Добавить цветовую индикацию в зависимости от уровня
    - _Требования: 3.1, 3.2, 3.3_



  - [ ] 5.2 Реализовать подсказки для полосы прогресса
    - Добавить подсказку с детальной информацией об уровне
    - Показывать текущий прогресс и требования для следующего уровня

    - _Требования: 3.4, 7.3_

- [ ] 6. Система подсказок и интерфейсных элементов
  - [ ] 6.1 Создать QuestTooltipRenderer
    - Создать класс для отрисовки подсказок квестов



    - Реализовать отображение описания квестов при наведении
    - Добавить подсказки для иконок целей и наград
    - _Требования: 7.1, 7.2, 7.4_

  - [ ] 6.2 Добавить отображение инвентаря игрока
    - Интегрировать стандартный инвентарь игрока в интерфейс
    - Разместить инвентарь в нижней части экрана
    - Обеспечить корректную работу перетаскивания предметов
    - _Требования: 5.1, 5.2, 5.3_

- [ ] 7. Финальная интеграция и полировка
  - [ ] 7.1 Обновить регистрацию экрана
    - Зарегистрировать новый экран в клиентской части Origins
    - Обновить привязку к блоку доски объявлений
    - Проверить корректность открытия интерфейса
    - _Требования: 6.3, 6.4_

  - [ ] 7.2 Добавить локализацию
    - Добавить переводы всех текстовых элементов на русский язык
    - Обновить файлы локализации
    - Проверить корректность отображения текста
    - _Требования: 7.4_

  - [ ] 7.3 Тестирование и отладка
    - Провести полное тестирование интерфейса
    - Исправить найденные ошибки и проблемы производительности
    - Проверить совместимость с Minecraft 1.20.1 и Fabric API
    - _Требования: 6.3, все функциональные требования_

## Примечания по реализации

### Ключевые изменения при переносе:

1. **Замена Kambrik на стандартные API:**
   - `KambrikHandledScreen` → `HandledScreen`
   - `KSpriteGrid` → `SpriteHelper` с `DrawContext.drawTexture()`
   - `KWidget` → `ClickableWidget`

2. **Адаптация системы данных:**
   - `BountyData` → `Quest` из системы Origins
   - `BountyDataEntry` → `QuestObjective` и `QuestReward`
   - Интеграция с `PlayerSkillComponent` для прогресса

3. **Сетевое взаимодействие:**
   - Замена Kambrik сетевых пакетов на Fabric Networking API
   - Использование `ClientPlayNetworking.send()` для отправки действий

### Технические детали:

- **Размеры интерфейса:** 348x165 пикселей (развернутый режим)
- **Размер кнопки квеста:** 160x20 пикселей
- **Максимум видимых квестов:** 7 штук
- **Текстура:** 512x512 пикселей с несколькими спрайтами

### Интеграция с Origins:

- Использование `OriginComponent` для определения класса игрока
- Интеграция с `QuestManager` для получения доступных квестов
- Использование `PlayerSkillComponent` для отображения прогресса
- Поддержка существующей системы наград `SkillPointToken`