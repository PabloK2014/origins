# Исправление ограничений по классам для центральных слотов квестов

## Проблема
Игроки могли брать квесты любого класса из центральной сетки 3x7 доски объявлений, обходя проверки класса.

## Решение

### Созданные классы слотов:

#### 1. QuestSlot.java
- Основной слот для квестов в центральной части (сетка 3x7)
- Поддержка маскировки слотов
- Проверка совместимости классов в `canTakeItems()`
- Ограничение вставки только билетов квестов в `canInsert()`
- Подробное логирование для отладки

#### 2. BountySlot.java  
- Альтернативный слот для квестов (если потребуется)
- Аналогичная логика проверки классов
- Поддержка BountifulQuestItem

#### 3. DecreeSlot.java
- Слот для декретов в правой части доски
- Базовая функциональность без ограничений

### Обновления в BountyBoardScreenHandler.java:
- Заменен `BountySlot` на `QuestSlot` в методе `setupSlots()`
- Сохранена существующая логика обработки кликов

## Логика проверки

### В методе canTakeItems():
1. **Проверка маскировки**: Замаскированные слоты недоступны
2. **Проверка типа предмета**: Только QuestTicketItem и BountifulQuestItem
3. **Извлечение квеста**: Получение Quest из ItemStack
4. **Проверка совместимости**: Использование QuestTicketAcceptanceHandler
5. **Сообщение об ошибке**: Уведомление игрока о несовместимости класса

### Нормализация классов:
- Удаление префикса "origins:" 
- Приведение к нижнему регистру
- Точное сравнение нормализованных названий

## Логирование

Добавлено подробное логирование для отладки:
```
[Origins] QuestSlot.canTakeItems вызван для игрока Player со стеком QuestTicketItem
[Origins] Проверяем квест 'Квест повара' для игрока 'Player'
[Origins] Результат проверки canAcceptQuest: false
```

## Тестирование

### Сценарии для проверки:
1. **Воин пытается взять квест повара из центра** → Блокировка + сообщение об ошибке
2. **Повар берет квест повара из центра** → Успешно
3. **Попытка вставить неподходящий предмет в слот** → Блокировка

### Ожидаемое поведение:
- ❌ Квесты других классов недоступны для взятия из центральной сетки
- ✅ Квесты своего класса доступны как обычно
- ✅ Понятные сообщения об ошибках
- ✅ Логирование всех операций для отладки

## Совместимость

- ✅ Работает с существующей системой маскировки
- ✅ Поддерживает как QuestTicketItem, так и BountifulQuestItem
- ✅ Совместимо с drag-and-drop функциональностью
- ✅ Не влияет на производительность

## Результат

Теперь система полностью блокирует возможность брать квесты неподходящего класса из любой части интерфейса:
- ❌ Левая панель: визуальная индикация + блокировка принятия
- ❌ Центральная сетка: блокировка взятия из слотов
- ❌ Drag-and-drop: проверка при перетаскивании

Все пути обхода ограничений по классам закрыты!